(()=>{"use strict";var e={83:(e,t,s)=>{s.r(t)},466:(e,t,s)=>{s.r(t)},936:(e,t,s)=>{s.r(t)},212:(e,t,s)=>{s.r(t)},284:(e,t,s)=>{s.r(t)},762:(e,t,s)=>{s.r(t)},393:(e,t,s)=>{s.r(t)},23:(e,t,s)=>{s.r(t)},491:(e,t,s)=>{s.r(t)},104:(e,t,s)=>{s.r(t)},387:(e,t,s)=>{s.r(t)},873:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const n=s(403),i=s(897),r=s(92),d=s(226),a=s(315),l=s(836),o=s(426),h=s(462),c=s(369),p="bastResult";class u extends n.BaseComponent{constructor(){super("main",["app"]),this.sizeField=16,this.cardFieldFrameSize=new r.CardFieldFrameSize(`${Math.sqrt(this.sizeField)} * ${Math.sqrt(this.sizeField)}`),this.settings=new a.GameSettings(this.sizeField),this.stepper=new l.Stepper,this.timer=new o.Timer,this.cardField=new i.CardField((()=>this.countStep()),(()=>this.renderFinishGame())),this.menu=new d.Menu,this.soundBtn=new h.SoundBtn,this.tableResults=new c.TableResults,this.cardField.refreshGameSize(this.sizeField),this.menu.element.childNodes.forEach((e=>{e.addEventListener("click",(e=>this.handlerMenu(e.target)))})),this.cardField.add(this.shuffle()),this.settings.element.childNodes.forEach((e=>{e.addEventListener("click",(e=>this.handlerSettings(e.target)))})),this.soundBtn.element.addEventListener("click",(()=>this.changeSound())),this.timer.startTimer(),this.element.appendChild(this.menu.element),this.element.appendChild(this.soundBtn.element),this.element.appendChild(this.stepper.element),this.element.appendChild(this.timer.element),this.element.appendChild(this.cardField.element),this.element.appendChild(this.cardFieldFrameSize.element),this.element.appendChild(this.settings.element)}handlerSettings(e){this.checkSoundOn()&&u.playAudio("./step.mp3");const t=+e.textContent[0];"number"==typeof t&&(this.sizeField=Math.pow(t,2),this.cardFieldFrameSize.changeFrameSizeText(`${Math.sqrt(this.sizeField)} * ${Math.sqrt(this.sizeField)}`)),this.cardField.clear(),this.cardField.add(this.shuffle()),this.cardField.refreshGameSize(this.sizeField),document.querySelectorAll("button").forEach((e=>{e.classList.remove("active")})),e.classList.add("active"),this.stepper.clearStep(),this.timer.stopTimer(),this.timer.startTimer()}handlerMenu(e){this.checkSoundOn()&&u.playAudio("./step.mp3"),"Shuffle and start"===e.textContent&&(this.cardField.clear(),this.cardField.add(this.shuffle()),this.stepper.clearStep(),this.timer.stopTimer(),this.timer.startTimer()),"Results"===e.textContent&&(console.log(1),this.cardField.clear(),this.openTableResult(),this.timer.timerZero(),this.timer.stopTimer())}shuffle(){return Array.from(Array(this.sizeField).keys()).sort((()=>Math.random()-.5))}countStep(){this.checkSoundOn()&&u.playAudio("./card.wav"),this.stepper.plusStep()}renderFinishGame(){this.checkSoundOn()&&u.playAudio("./win.mp3"),this.cardField.element.innerHTML=`<div class='finish-game'>\n    You are win! Steps: <span>${this.stepper.getSteps()} </span>, Time: <span>${this.timer.getTime()}</span>\n    </div>`,this.timer.stopTimer(),this.localStorage()}static playAudio(e){const t=new Audio;t.src=e,t.currentTime=0,t.play()}changeSound(){this.soundBtn.changeSoundBtn()}checkSoundOn(){return"Sound ON"===this.soundBtn.getSoundButtonText()}localStorage(){const e={steps:this.stepper.getSteps(),time:this.timer.getTime(),typeGame:`${Math.sqrt(this.sizeField)} * ${Math.sqrt(this.sizeField)}`},t=localStorage.getItem(p);let s=[];s=t&&t.length?[...JSON.parse(t),e]:[e],s.sort(((e,t)=>e.steps>t.steps?1:t.steps>e.steps?-1:0)),localStorage.setItem(p,JSON.stringify(s.slice(0,10)))}openTableResult(){this.cardField.element.innerHTML="";const e=localStorage.getItem(p);e&&this.tableResults.renderTable(JSON.parse(e)),this.cardField.element.appendChild(this.tableResults.element)}}t.App=u},507:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0,s(83);const n=s(403);class i extends n.BaseComponent{constructor(e,t=[]){super("button",["button"].concat(t)),this.element.innerHTML=e}}t.Button=i},92:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardFieldFrameSize=void 0,s(466);const n=s(403);class i extends n.BaseComponent{constructor(e){super("div",["card-field-frame-size"]),this.element.innerHTML=`     \n                <div class="card-field-frame-size">Frame size: ${e}</div>\n            `}changeFrameSizeText(e){this.element.innerHTML="",this.element.innerHTML=` \n                <div class="card-field-frame-size">Frame size: ${e}</div>`}}t.CardFieldFrameSize=i},897:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardField=void 0,s(936);const n=s(403),i=s(124),r=s(836);class d extends n.BaseComponent{constructor(e,t){super("div",["card-field"]),this.cards=[],this.stepper=new r.Stepper,this.count=e,this.finishGame=t}clear(){this.cards=[],this.element.innerHTML=""}add(e){this.cards=e,this.cards.forEach((e=>{if(0!==e){const t=new i.Card(e,[`card__size__${this.cards.length}`]);t.element.addEventListener("click",(e=>this.handler(e.target))),this.element.appendChild(t.element)}else{const t=new i.Card(e,["empty-card",`card__size__${this.cards.length}`]);this.element.appendChild(t.element)}}))}handler(e){const t=e.textContent;this.renderNumbers(+t,e)}refreshGameSize(e){this.currantGameSize=e}getCardSize(e){if(window.innerWidth<=500)switch(this.currantGameSize){case 9:return"-"===e?"-100px":"100px";case 16:return"-"===e?"-75px":"75px";case 25:return"-"===e?"-60px":"60px";case 36:return"-"===e?"-50px":"50px";case 49:return"-"===e?"-42px":"42px";case 64:return"-"===e?"-37px":"37px";default:return"100px"}switch(this.currantGameSize){case 9:return"-"===e?"-133px":"133px";case 16:return"-"===e?"-100px":"100px";case 25:return"-"===e?"-80px":"80px";case 36:return"-"===e?"-66px":"66px";case 49:return"-"===e?"-57px":"57px";case 64:return"-"===e?"-50px":"50px";default:return"100px"}}renderNumbers(e,t){const s=this.cards,n=[...s],i=Math.sqrt(s.length),r=s.indexOf(e),a=r%i;0===s[r+1]&&a!==i-1?(n.splice(r+1,1,e),n.splice(r,1,0),t.style.left=this.getCardSize("+"),this.count()):0===s[r-1]&&0!==a?(n.splice(r-1,1,e),n.splice(r,1,0),t.style.left=this.getCardSize("-"),this.count()):0===s[r-i]&&r>i-1?(n.splice(r-i,1,e),n.splice(r,1,0),t.style.top=this.getCardSize("-"),this.count()):0===s[r+i]&&(n.splice(r+i,1,e),n.splice(r,1,0),t.style.top=this.getCardSize("+"),this.count()),d.isFinishGame(n)?setTimeout((()=>{this.clear(),this.finishGame()}),300):setTimeout((()=>{this.clear(),this.add(n)}),300)}static isFinishGame(e){let t="";for(let s=0;s<e.length;s++)e[s+1]&&e[s]>e[s+1]&&(t="err");return!t&&0===e[e.length-1]}}t.CardField=d},124:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,s(212);const n=s(403);class i extends n.BaseComponent{constructor(e,t=[]){super("div",["card"].concat(...t)),this.element.innerHTML=`${e||""}`}}t.Card=i},315:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameSettings=void 0,s(284);const n=s(403),i=s(507);class r extends n.BaseComponent{constructor(e){super("div",["settings"]),this.element.innerHTML="     \n      <p>Other sizes:</p> \n   ";const t=new i.Button("3*3",9===e?["active"]:[]),s=new i.Button("4*4",16===e?["active"]:[]),n=new i.Button("5*5",25===e?["active"]:[]),r=new i.Button("6*6",36===e?["active"]:[]),d=new i.Button("7*7",49===e?["active"]:[]),a=new i.Button("8*8",64===e?["active"]:[]);this.element.appendChild(t.element),this.element.appendChild(s.element),this.element.appendChild(n.element),this.element.appendChild(r.element),this.element.appendChild(d.element),this.element.appendChild(a.element)}}t.GameSettings=r},226:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=void 0,s(762);const n=s(403),i=s(507);class r extends n.BaseComponent{constructor(){super("div",["menu"]);const e=new i.Button("Shuffle and start"),t=new i.Button("Save"),s=new i.Button("Results");this.element.appendChild(e.element),this.element.appendChild(t.element),this.element.appendChild(s.element)}}t.Menu=r},462:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SoundBtn=void 0;const n=s(403),i=s(507);s(393);class r extends n.BaseComponent{constructor(){super("div",["sound"]),this.soundButtonText="Sound ON",this.soundBtn=new i.Button(this.soundButtonText),this.element.appendChild(this.soundBtn.element)}changeSoundBtn(){this.element.innerHTML="","Sound ON"===this.soundButtonText?this.soundButtonText="Sound OFF":this.soundButtonText="Sound ON",this.soundBtn=new i.Button(this.soundButtonText),this.element.appendChild(this.soundBtn.element)}getSoundButtonText(){return this.soundButtonText}}t.SoundBtn=r},836:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Stepper=void 0,s(23);const n=s(403);class i extends n.BaseComponent{constructor(){super("div",["stepper"]),this.numberStep=0,this.element.innerHTML="     \n    <p>Moves:</p>\n    <p>0</p>\n   "}plusStep(){this.numberStep+=1,this.rerender()}clearStep(){this.numberStep=0,this.rerender()}rerender(){this.element.innerHTML=`     \n    <p>Moves:</p>\n    <p>${this.numberStep}</p>\n   `}getSteps(){return this.numberStep}}t.Stepper=i},369:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TableResults=void 0,s(491);const n=s(403);class i extends n.BaseComponent{constructor(){super("div",["table-results"]),this.element.innerHTML='<div class="no-results">No results</div>'}renderTable(e){this.element.innerHTML="",e&&e.forEach((e=>{const t=document.createElement("div");t.classList.add("table_row");const s=document.createElement("div");s.innerHTML=`Steps: ${e.steps}`;const n=document.createElement("div");n.innerHTML=`Time: ${e.time}`;const i=document.createElement("div");i.innerHTML=`Type game: ${e.typeGame}`,t.appendChild(s),t.appendChild(n),t.appendChild(i),this.element.appendChild(t)}))}}t.TableResults=i},426:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;const n=s(403);s(104);class i extends n.BaseComponent{constructor(){super("div",["timer"]),this.sec=0,this.currantTime="0:00",this.element.innerHTML=`Timer: ${this.currantTime}`}startTimer(){this.sec=0,this.rerender(),this.gameTimer=setInterval((()=>{this.sec+=1,this.rerender()}),1e3)}timerZero(){this.sec=0,this.rerender()}stopTimer(){clearInterval(this.gameTimer),this.rerender()}rerender(){const e=Math.floor(this.sec/60),t=Math.floor(this.sec%60),s=`${e}:${t<10?`0${t}`:t}`;this.currantTime=s,this.element.innerHTML=`Timer: ${s}`}getTime(){return this.currantTime}}t.Timer=i},403:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,s),r.exports}s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=s(873);s(387),window.onload=()=>{const t=new e.App;document.body.appendChild(t.element)}})()})();