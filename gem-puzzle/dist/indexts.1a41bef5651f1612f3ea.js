(()=>{"use strict";var e={83:(e,t,n)=>{n.r(t)},466:(e,t,n)=>{n.r(t)},936:(e,t,n)=>{n.r(t)},212:(e,t,n)=>{n.r(t)},284:(e,t,n)=>{n.r(t)},762:(e,t,n)=>{n.r(t)},393:(e,t,n)=>{n.r(t)},23:(e,t,n)=>{n.r(t)},104:(e,t,n)=>{n.r(t)},387:(e,t,n)=>{n.r(t)},873:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const s=n(403),i=n(897),r=n(92),d=n(226),a=n(315),h=n(836),o=n(426),l=n(462);class c extends s.BaseComponent{constructor(){super("main",["app"]),this.sizeField=16,this.cardFieldFrameSize=new r.CardFieldFrameSize(`${Math.sqrt(this.sizeField)} * ${Math.sqrt(this.sizeField)}`),this.settings=new a.GameSettings(this.sizeField),this.stepper=new h.Stepper,this.timer=new o.Timer,this.cardField=new i.CardField((()=>this.countStep()),(()=>this.renderFinishGame())),this.menu=new d.Menu,this.soundBtn=new l.SoundBtn,this.cardField.refreshGameSize(this.sizeField),this.menu.element.childNodes.forEach((e=>{e.addEventListener("click",(e=>this.handlerMenu(e.target)))})),this.cardField.add(this.shuffle()),this.settings.element.childNodes.forEach((e=>{e.addEventListener("click",(e=>this.handlerSettings(e.target)))})),this.soundBtn.element.addEventListener("click",(()=>this.changeSound())),this.timer.startTimer(),this.element.appendChild(this.menu.element),this.element.appendChild(this.soundBtn.element),this.element.appendChild(this.stepper.element),this.element.appendChild(this.timer.element),this.element.appendChild(this.cardField.element),this.element.appendChild(this.cardFieldFrameSize.element),this.element.appendChild(this.settings.element)}handlerSettings(e){this.checkSoundOn()&&this.playAudio("./step.mp3");const t=+e.textContent[0];"number"==typeof t&&(this.sizeField=Math.pow(t,2),this.cardFieldFrameSize.changeFrameSizeText(`${Math.sqrt(this.sizeField)} * ${Math.sqrt(this.sizeField)}`)),this.cardField.clear(),this.cardField.add(this.shuffle()),this.cardField.refreshGameSize(this.sizeField),document.querySelectorAll("button").forEach((e=>{e.classList.remove("active")})),e.classList.add("active"),this.stepper.clearStep(),this.timer.stopTimer(),this.timer.startTimer()}handlerMenu(e){this.checkSoundOn()&&this.playAudio("./step.mp3"),"Shuffle and start"===e.textContent&&(this.cardField.clear(),this.cardField.add(this.shuffle()),this.stepper.clearStep(),this.timer.stopTimer(),this.timer.startTimer())}shuffle(){return Array.from(Array(this.sizeField).keys()).sort((()=>Math.random()-.5))}countStep(){this.checkSoundOn()&&this.playAudio("./card.wav"),this.stepper.plusStep()}renderFinishGame(){this.checkSoundOn()&&this.playAudio("./win.mp3"),this.cardField.element.innerHTML=`<div class='finish-game'>\n    You are win! Steps: <span>${this.stepper.getSteps()} </span>, Time: <span>${this.timer.getTime()}</span>\n    </div>`,this.timer.stopTimer()}playAudio(e){console.log(this.sizeField);const t=new Audio;t.src=e,t.currentTime=0,t.play()}changeSound(){this.soundBtn.changeSoundBtn()}checkSoundOn(){return"Sound ON"===this.soundBtn.getSoundButtonText()}}t.App=c},507:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0,n(83);const s=n(403);class i extends s.BaseComponent{constructor(e,t=[]){super("button",["button"].concat(t)),this.element.innerHTML=e}}t.Button=i},92:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardFieldFrameSize=void 0,n(466);const s=n(403);class i extends s.BaseComponent{constructor(e){super("div",["card-field-frame-size"]),this.element.innerHTML=`     \n                <div class="card-field-frame-size">Frame size: ${e}</div>\n            `}changeFrameSizeText(e){this.element.innerHTML="",this.element.innerHTML=` \n                <div class="card-field-frame-size">Frame size: ${e}</div>`}}t.CardFieldFrameSize=i},897:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardField=void 0,n(936);const s=n(403),i=n(124),r=n(836);class d extends s.BaseComponent{constructor(e,t){super("div",["card-field"]),this.cards=[],this.stepper=new r.Stepper,this.count=e,this.finishGame=t}clear(){this.cards=[],this.element.innerHTML=""}add(e){this.cards=e,this.cards.forEach((e=>{if(0!==e){const t=new i.Card(e,[`card__size__${this.cards.length}`]);t.element.addEventListener("click",(e=>this.handler(e.target))),this.element.appendChild(t.element)}else{const t=new i.Card(e,["empty-card",`card__size__${this.cards.length}`]);this.element.appendChild(t.element)}}))}handler(e){const t=e.textContent;this.renderNumbers(+t,e)}refreshGameSize(e){this.currantGameSize=e}getCardSize(e){if(window.innerWidth<=500)switch(this.currantGameSize){case 9:return"-"===e?"-100px":"100px";case 16:return"-"===e?"-75px":"75px";case 25:return"-"===e?"-60px":"60px";case 36:return"-"===e?"-50px":"50px";case 49:return"-"===e?"-42px":"42px";case 64:return"-"===e?"-37px":"37px";default:return"100px"}switch(this.currantGameSize){case 9:return"-"===e?"-133px":"133px";case 16:return"-"===e?"-100px":"100px";case 25:return"-"===e?"-80px":"80px";case 36:return"-"===e?"-66px":"66px";case 49:return"-"===e?"-57px":"57px";case 64:return"-"===e?"-50px":"50px";default:return"100px"}}renderNumbers(e,t){const n=this.cards,s=[...n],i=Math.sqrt(n.length),r=n.indexOf(e),a=r%i;0===n[r+1]&&a!==i-1?(s.splice(r+1,1,e),s.splice(r,1,0),t.style.left=this.getCardSize("+"),this.count()):0===n[r-1]&&0!==a?(s.splice(r-1,1,e),s.splice(r,1,0),t.style.left=this.getCardSize("-"),this.count()):0===n[r-i]&&r>i-1?(s.splice(r-i,1,e),s.splice(r,1,0),t.style.top=this.getCardSize("-"),this.count()):0===n[r+i]&&(s.splice(r+i,1,e),s.splice(r,1,0),t.style.top=this.getCardSize("+"),this.count()),d.isFinishGame(s)?setTimeout((()=>{this.clear(),this.finishGame()}),300):setTimeout((()=>{this.clear(),this.add(s)}),300)}static isFinishGame(e){let t="";for(let n=0;n<e.length;n++)e[n+1]&&e[n]>e[n+1]&&(t="err");return!t&&0===e[e.length-1]}}t.CardField=d},124:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,n(212);const s=n(403);class i extends s.BaseComponent{constructor(e,t=[]){super("div",["card"].concat(...t)),this.element.innerHTML=`${e||""}`}}t.Card=i},315:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GameSettings=void 0,n(284);const s=n(403),i=n(507);class r extends s.BaseComponent{constructor(e){super("div",["settings"]),this.element.innerHTML="     \n      <p>Other sizes:</p> \n   ";const t=new i.Button("3*3",9===e?["active"]:[]),n=new i.Button("4*4",16===e?["active"]:[]),s=new i.Button("5*5",25===e?["active"]:[]),r=new i.Button("6*6",36===e?["active"]:[]),d=new i.Button("7*7",49===e?["active"]:[]),a=new i.Button("8*8",64===e?["active"]:[]);this.element.appendChild(t.element),this.element.appendChild(n.element),this.element.appendChild(s.element),this.element.appendChild(r.element),this.element.appendChild(d.element),this.element.appendChild(a.element)}}t.GameSettings=r},226:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=void 0,n(762);const s=n(403),i=n(507);class r extends s.BaseComponent{constructor(){super("div",["menu"]);const e=new i.Button("Shuffle and start"),t=new i.Button("Save"),n=new i.Button("Results");this.element.appendChild(e.element),this.element.appendChild(t.element),this.element.appendChild(n.element)}}t.Menu=r},462:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SoundBtn=void 0;const s=n(403),i=n(507);n(393);class r extends s.BaseComponent{constructor(){super("div",["sound"]),this.soundButtonText="Sound ON",this.soundBtn=new i.Button(this.soundButtonText),this.element.appendChild(this.soundBtn.element)}changeSoundBtn(){this.element.innerHTML="","Sound ON"===this.soundButtonText?this.soundButtonText="Sound OFF":this.soundButtonText="Sound ON",this.soundBtn=new i.Button(this.soundButtonText),this.element.appendChild(this.soundBtn.element)}getSoundButtonText(){return this.soundButtonText}}t.SoundBtn=r},836:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Stepper=void 0,n(23);const s=n(403);class i extends s.BaseComponent{constructor(){super("div",["stepper"]),this.numberStep=0,this.element.innerHTML="     \n    <p>Moves:</p>\n    <p>0</p>\n   "}plusStep(){this.numberStep+=1,this.rerender()}clearStep(){this.numberStep=0,this.rerender()}rerender(){this.element.innerHTML=`     \n    <p>Moves:</p>\n    <p>${this.numberStep}</p>\n   `}getSteps(){return this.numberStep}}t.Stepper=i},426:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;const s=n(403);n(104);class i extends s.BaseComponent{constructor(){super("div",["timer"]),this.sec=0,this.currantTime="0:00",this.element.innerHTML=`Timer: ${this.currantTime}`}startTimer(){this.sec=0,this.rerender(),this.gameTimer=setInterval((()=>{this.sec+=1,this.rerender()}),1e3)}stopTimer(){clearInterval(this.gameTimer),this.rerender()}rerender(){const e=Math.floor(this.sec/60),t=Math.floor(this.sec%60),n=`${e}:${t<10?`0${t}`:t}`;this.currantTime=n,this.element.innerHTML=`Timer: ${n}`}getTime(){return this.currantTime}}t.Timer=i},403:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,n),r.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=n(873);n(387),window.onload=()=>{const t=new e.App;document.body.appendChild(t.element)}})()})();